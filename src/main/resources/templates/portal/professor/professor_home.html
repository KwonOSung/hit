<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/reset.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/commonElement.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/professor/professorHome.css}" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Portal</title>
</head>
<body>
<header class="portal-head">
    <div>
        <h1><img src="/image/home/HitLogo.png" alt="" /></h1>
    </div>
</header>
<section class="portal-main">
    <nav class="portal-nav">
        <ul>
            <li class="portal-home-button" onclick="location.href='/p/home'"><div><img src="/image/home/homeicon.png" alt="" /></div>홈</li>
            <li class="portal-profinfo-button" onclick="location.href='/p/info'"><div><img src="/image/home/userIcon.png" alt="" /></div>교수정보</li>
            <li class="portal-attendance-button" onclick="location.href='/Attendance/AttendanceCalendar'"><div><img src="/image/home/Attendance.png" alt="" /></div>출석부</li>
            <li class="portal-scoring-button" onclick="location.href='/p/score'"><div><img src="/image/home/importIcon.png" alt=""></div>과목채점</li>
            <li class="portal-report-check-button" onclick="location.href='/p/report'"><div><img src="/image/home/importIcon.png" alt=""></div>과제확인</li>
        </ul>
    </nav>
    <div class="portal-home portal-main-frame">
        <div class="portal-user-login-etc">
            <div>
                <p><b>길오성</b>님 환영합니다</p>
                <ul>
                    <li>비밀번호 변경</li>
                    <li>|</li>
                    <li>인증서 등록</li>
                </ul>
            </div>
            <ul>
                <li>
                    <ul>
                        <li><img src="/image/home/mailIcon.png" alt=""></li>
                        <li>웹메일</li>
                    </ul>
                </li>
                <li>
                    <ul>
                        <li><img src="/image/home/smallMailIcon.png" alt=""></li>
                        <li>쪽지</li>
                    </ul>
                </li>
                <li>
                    <ul>
                        <li><img src="/image/home/chatIcon.png" alt=""></li>
                        <li>부서계시판</li>
                    </ul>
                </li>
            </ul>
            <ul>
                <li>
                    <p>시간</p>
                    <p id="current-time">Loading...</p>
                </li>
                <li>
                    <p>접속 IP</p>
                    <p id="ip-address">Loading...</p>
                </li>
                <li>
                    <button>마이페이지</button>
                    <button onclick="location.href='/logout'">로그아웃</button>
                </li>
            </ul>
        </div>
        <div class="portal-college-schedule">
            <h2>학사일정</h2>
            <ul>
                <li>
                    <button><img src="/image/home/arrowBack.png" alt=""></button>
                    <p class="portal-college-schedule-control-date">일자</p>
                    <button><img src="/image/home/arrowForward.png" alt=""></button>
                </li>
                <li>
                    <ul>
                        <li>
                            <p class="portal-college-schedule-date">01-08</p>
                            <p>1학년 학생회모집</p>
                        </li>
                        <li>
                            <p class="portal-college-schedule-date">01-08</p>
                            <p>1학년 학생회모집</p>
                        </li>
                        <li>
                            <p class="portal-college-schedule-date">01-08</p>
                            <p>1학년 학생회모집</p>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="portal-admin-student-check"></div>
        <div class="portal-college-news">
            <ul class="portal-college-news-controller">
                <li class="portal-notice-button">공지사항</li>
                <li class="portal-class-button">학사공지</li>
                <li class="portal-employee-button">채용공고</li>
                <li class="portal-conversation-button">자유계시판</li>
                <div class="active-line"></div>
                <!--위에 움직이는 줄-->
            </ul>
            <ul class="portal-college-notice-page portal-college-news-frame">
                <li>
                    <p>재목을 입력해주세요1</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
            </ul>
            <ul class="portal-college-class-page portal-college-news-frame">
                <li>
                    <p>재목을 입력해주세요2</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
            </ul>
            <ul class="portal-college-employee-page portal-college-news-frame">
                <li>
                    <p>재목을 입력해주세요3</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
            </ul>
            <ul
                    class="portal-college-conversation-page portal-college-news-frame"
            >
                <li>
                    <p>재목을 입력해주세요4</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
                <li>
                    <p>재목을 입력해주세요</p>
                    <p>24.10.11</p>
                </li>
            </ul>
        </div>
        <div class="portal-admin-paycheck">
            <canvas id="tuitionChart"></canvas>
            <canvas id="paymentStatusChart"></canvas>
        </div>
    </div>
    <!-----------------------------------portal home finish---------------------------------------------------------------->
</section>
<script>
    //portal home 스크립트
    /*접속 ip를 갖고오는 스크립트*/
    /* fetch("http://ip-api.com/json")
      .then((response) => response.json())
      .then((data) => {
        document.getElementById("ip-address").textContent = data.query;
      })
      .catch((error) => {
        console.error("Error fetching IP address:", error);
        document.getElementById("ip-address").textContent =
          "Could not retrieve IP address";
      });*/
    /*현재 접속 시간을 가지고 오는 스크립트*/
    function showCurrentDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, "0"); // 월은 0부터 시작하므로 +1
        const day = String(now.getDate()).padStart(2, "0");
        const hours = String(now.getHours()).padStart(2, "0");
        const minutes = String(now.getMinutes()).padStart(2, "0");
        const seconds = String(now.getSeconds()).padStart(2, "0");

        const formattedDateTime = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        document.getElementById("current-time").textContent = formattedDateTime;
    }

    // Show date and time immediately
    showCurrentDateTime();

    // Update date and time every second
    setInterval(showCurrentDateTime, 1000);
    /*접속 시간을 가지고오는 스크립트 끝*/

    /*공지사항 및 기타 계시판 페이지 전환용의 스크립트*/
    document.addEventListener("DOMContentLoaded", () => {
        const pages = {
            notice: document.querySelector(".portal-college-notice-page"),
            class: document.querySelector(".portal-college-class-page"),
            employee: document.querySelector(".portal-college-employee-page"),
            conversation: document.querySelector(
                ".portal-college-conversation-page"
            ),
        };

        // 페이지 초기화
        Object.keys(pages).forEach((key) => {
            pages[key].style.display = "none";
        });
        pages.notice.style.display = "block"; // 처음에는 공지사항만 표시

        const buttons = document.querySelectorAll(
            ".portal-college-news-controller li"
        );
        const activeLine = document.querySelector(".active-line");

        // 초기 활성 줄 위치 설정
        function setActiveLine(target) {
            activeLine.style.width = `${target.offsetWidth}px`;
            activeLine.style.left = `${target.offsetLeft}px`;
        }

        // 버튼 클릭 이벤트 추가 및 페이지 전환
        buttons.forEach((button) => {
            button.addEventListener("click", () => {
                const pageKey = button.classList[0].split("-")[1]; // 버튼 클래스에서 페이지 키 추출
                showPage(pageKey);
                setActiveLine(button); // 줄 위치 업데이트
            });
        });

        // 페이지 전환 함수
        function showPage(page) {
            Object.keys(pages).forEach((key) => {
                pages[key].style.display = key === page ? "block" : "none";
            });
        }

        // 초기 활성 줄 위치 설정 (첫 번째 버튼 기준)
        setActiveLine(buttons[0]);
    });
</script>
</body>
</html>
